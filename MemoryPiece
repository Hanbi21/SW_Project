import java.util.List;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;
import java.time.LocalDate;
import java.text.ParseException;
import java.text.SimpleDateFormat;

class DateFormatCheck {
	private static final Scanner scanner = new Scanner(System.in);
	
	public static boolean isValidDate(String dateStr) {
		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
		sdf.setLenient(false);
		try {
			sdf.parse(dateStr);
			return true;
		} catch (ParseException e) {
			return false;
		}
	}
	
	public static String getValidDateInput(String prompt) {
		while (true) {
			System.out.print(prompt);
			String date = scanner.nextLine();
			if (isValidDate(date)) {
				return date;
			} else {
				System.out.println("ì˜ëª»ëœ ë‚ ì§œ í˜•ì‹ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
			}
		}
	}
}

class User {
    private String id;
    private String password;
    private String name;
    private String phone;
    private String email;

    public User(String id, String password, String name, String phone, String email) {
        this.id = id;
        this.password = password;
        this.name = name;
        this.phone = phone;
        this.email = email;
    }

    public String getId() { return id; }
    public String getPassword() { return password; }
    public String getName() { return name; }
    public String getPhone() { return phone; }
    public String getEmail() { return email; }
}

class LoginSystem {
    private HashMap<String, User> userId;
    private HashMap<String, String> userEmail;
    private HashMap<String, String> userPhone;
    private Scanner scanner;

    public LoginSystem() {
    	userId = new HashMap<>();
    	userEmail = new HashMap<>();
    	userPhone = new HashMap<>();
        scanner = new Scanner(System.in);
    }

    public String systemStart() {
    	System.out.println("=== ê¸°ì–µ ì¡°ê°ì— ì ‘ì†í•˜ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤! ===");
        while (true) {
            System.out.println("[1] ë¡œê·¸ì¸");
            System.out.println("[2] íšŒì›ê°€ì…");
            System.out.print("ì„ íƒ: ");
            String input = scanner.nextLine();

            if (!input.equals("1") && !input.equals("2")) {
                System.out.println("ì˜ëª»ëœ ì…ë ¥ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.");
                continue;
            }

            System.out.println("----------");
            System.out.print("ì•„ì´ë””: ");
            String id = scanner.nextLine();
            System.out.print("ë¹„ë°€ë²ˆí˜¸: ");
            String password = scanner.nextLine();

            if (input.equals("1")) {
                if (login(id, password)) {
                    System.out.println("\në¡œê·¸ì¸ ì„±ê³µ!");
                    return id;
                } else {
                    System.out.println("ë“±ë¡ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì´ê±°ë‚˜ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
                    System.out.println("----------");
                }
            } else if (input.equals("2")) {
            	System.out.print("ì´ë¦„: ");
            	String name = scanner.nextLine();
                System.out.print("ì „í™”ë²ˆí˜¸: ");
                String phone = scanner.nextLine();
                System.out.print("ì´ë©”ì¼: ");
                String email = scanner.nextLine();

                if (join(id, password, name, phone, email)) {
                    System.out.println("íšŒì›ê°€ì… ì„±ê³µ! ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                    System.out.println("----------");
                }
            }
        }
    }

    private boolean login(String id, String password) {
        if (userId.containsKey(id)) {
            User user = userId.get(id);
            return user.getPassword().equals(password);
        }
        return false;
    }

    private boolean join(String id, String password, String name, String phone, String email) {
        boolean isDuplicate = false;

        if (userId.containsKey(id)) {
            System.out.println("ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.");
            isDuplicate = true;
        }
        if (userPhone.containsKey(phone)) {
            System.out.println("ì´ë¯¸ ë“±ë¡ëœ ì „í™”ë²ˆí˜¸ì…ë‹ˆë‹¤.");
            isDuplicate = true;
        }
        if (userEmail.containsKey(email)) {
            System.out.println("ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.");
            isDuplicate = true;
        }

        if (isDuplicate) return false;

        User newUser = new User(id, password, name, phone, email);
        userId.put(id, newUser);
        userPhone.put(phone, id);
        userEmail.put(email, id);
        return true;
    }
}

class Schedule {
    private Scanner scanner = new Scanner(System.in);
    private Map<String, List<String>> scheduleMap = new HashMap<>(); // ë‚ ì§œë³„ ì¼ì • ì €ì¥
    public Map<String, List<String>> getScheduleMap() {
        return scheduleMap;
    }

    public void addSchedule() {
        String date = DateFormatCheck.getValidDateInput("ì¼ì •ì„ ì¶”ê°€í•  ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd): ");
        
        System.out.print("ì¼ì • ë‚´ìš© ì…ë ¥: ");
        String content = scanner.nextLine();

        // ë‚ ì§œì— í•´ë‹¹í•˜ëŠ” ë¦¬ìŠ¤íŠ¸ê°€ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±
        List<String> schedules = scheduleMap.getOrDefault(date, new ArrayList<>());
        schedules.add(content);
        scheduleMap.put(date, schedules);

        System.out.println(date + "ì— ì¼ì •ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    public void viewSchedule() {
        System.out.println("\nğŸ“Œ ë“±ë¡ëœ ì¼ì • ëª©ë¡");
        if (scheduleMap.isEmpty()) {
            System.out.println("ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.");
        } else {
            for (String date : scheduleMap.keySet()) {
                System.out.println(date);
                List<String> schedules = scheduleMap.get(date);
                for (int i = 0; i < schedules.size(); i++) {
                    System.out.println("  " + (i + 1) + ". " + schedules.get(i));
                }
            }
        }
    }

    public void deleteSchedule() {
    	String date = DateFormatCheck.getValidDateInput("ì‚­ì œí•  ì¼ì • ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd): ");

        if (scheduleMap.containsKey(date)) {
            List<String> schedules = scheduleMap.get(date);
            if (schedules.isEmpty()) {
                System.out.println("í•´ë‹¹ ë‚ ì§œì— ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.");
                return;
            }

            System.out.println("í•´ë‹¹ ë‚ ì§œì˜ ì¼ì • ëª©ë¡:");
            for (int i = 0; i < schedules.size(); i++) {
                System.out.println((i + 1) + ". " + schedules.get(i));
            }

            System.out.print("ì‚­ì œí•  ì¼ì • ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”: ");
            try {
                int index = Integer.parseInt(scanner.nextLine()) - 1;
                if (index >= 0 && index < schedules.size()) {
                    String removed = schedules.remove(index);
                    System.out.println("ì¼ì • \"" + removed + "\"ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");

                    // ë§Œì•½ ëª¨ë“  ì¼ì •ì´ ì‚­ì œë˜ì—ˆìœ¼ë©´ ë‚ ì§œ ìì²´ë¥¼ ì‚­ì œ
                    if (schedules.isEmpty()) {
                        scheduleMap.remove(date);
                    }
                } else {
                    System.out.println("ì˜ëª»ëœ ë²ˆí˜¸ì…ë‹ˆë‹¤.");
                }
            } catch (NumberFormatException e) {
                System.out.println("ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            }
        } else {
            System.out.println("ì˜ëª»ëœ ì–‘ì‹ì…ë‹ˆë‹¤.");
        }
    }
    
    public void checkTodaySchedule() {
        Notification notification = new Notification();
        notification.checkTodaySchedule(scheduleMap);
    }

    public void scheduleMenu() {
        while (true) {
        	System.out.println("----------");
            System.out.println("[1] ì¼ì • ì¶”ê°€ \n[2] ì¼ì • ì¡°íšŒ \n[3] ì¼ì • ì‚­ì œ \n[0] ë’¤ë¡œê°€ê¸°");
            System.out.print("ì‚¬ìš©í•  ê¸°ëŠ¥ì„ ì„ íƒí•˜ì„¸ìš”: ");
            String choice = scanner.nextLine();

            switch (choice) {
                case "1":
                    addSchedule();
                    break;
                case "2":
                    viewSchedule();
                    break;
                case "3":
                    deleteSchedule();
                    break;
                case "0":
                    return;
                default:
                    System.out.println("ì˜ëª»ëœ ì„ íƒì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.");
            }
        }
    }
}

class TodoList {
    private Scanner scanner = new Scanner(System.in);
    private Map<String, String> todoMap = new HashMap<>(); // ë‚ ì§œë³„ To-do í•­ëª© ì €ì¥
    private Map<String, Boolean> todoStatus = new HashMap<>(); // To-do ì™„ë£Œ ì—¬ë¶€ ì €ì¥
    public Map<String, String> getTodoMap() {
        return todoMap;
    }

    public void addTodo() {
        System.out.print("ì¶”ê°€í•  To-do í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”: ");
        String todoItem = scanner.nextLine();

        String date = DateFormatCheck.getValidDateInput("To-do í•­ëª©ì— ëŒ€í•œ ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd): ");

        todoMap.put(date + ": " + todoItem, todoItem);
        todoStatus.put(date + ": " + todoItem, false); // ê¸°ë³¸ ì™„ë£Œ ìƒíƒœëŠ” false
        System.out.println(todoItem + "ì´(ê°€) To-do ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    public void viewTodo() {
        System.out.println("\nğŸ“Œ ë“±ë¡ëœ To-do ëª©ë¡");
        if (todoMap.isEmpty()) {
            System.out.println("ë“±ë¡ëœ To-do í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.");
        } else {
            for (String todoItem : todoMap.keySet()) {
                String status = todoStatus.get(todoItem) ? "ì™„ë£Œ" : "ë¯¸ì™„ë£Œ";
                System.out.printf("%s - [%s]\n", todoItem, status);
            }
        }
    }

    public void markCompleted() {
        System.out.print("ì™„ë£Œí•  To-do í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd: í•­ëª©ëª…): ");
        String todoItem = scanner.nextLine();

        if (todoStatus.containsKey(todoItem)) {
            todoStatus.put(todoItem, true);
            System.out.println(todoItem + "ì´(ê°€) ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
        } else {
            System.out.println("í•´ë‹¹ To-do í•­ëª©ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
    }

    public void unmarkCompleted() {
        System.out.print("ì™„ë£Œ ì·¨ì†Œí•  To-do í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd: í•­ëª©ëª…): ");
        String todoItem = scanner.nextLine();

        if (todoStatus.containsKey(todoItem)) {
            todoStatus.put(todoItem, false);
            System.out.println(todoItem + "ì´(ê°€) ë¯¸ì™„ë£Œ ìƒíƒœë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
        } else {
            System.out.println("í•´ë‹¹ To-do í•­ëª©ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
    }

    public void deleteTodo() {
        System.out.print("ì‚­ì œí•  To-do í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd: í•­ëª©ëª…): ");
        String todoItem = scanner.nextLine();

        if (todoMap.containsKey(todoItem)) {
            todoMap.remove(todoItem);
            todoStatus.remove(todoItem);
            System.out.println(todoItem + "ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
        } else {
            System.out.println("í•´ë‹¹ To-do í•­ëª©ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
    }

    public void checkTodayTodo() {
        Notification notification = new Notification();
        notification.checkTodayTodo(todoMap);
    }
    
    public void todoMenu() {
        while (true) {
        	System.out.println("----------");
            System.out.println("[1] To-do í•­ëª© ì¶”ê°€ \n[2] To-do í•­ëª© ì¡°íšŒ \n[3] ì™„ë£Œ ìƒíƒœ ë³€ê²½ \n[4] ì™„ë£Œ ì·¨ì†Œ \n[5] To-do í•­ëª© ì‚­ì œ \n[0] ë’¤ë¡œê°€ê¸°");
            System.out.print("ì‚¬ìš©í•  ê¸°ëŠ¥ì„ ì„ íƒí•˜ì„¸ìš”: ");
            String choice = scanner.nextLine();

            switch (choice) {
                case "1":
                    addTodo();
                    break;
                case "2":
                    viewTodo();
                    break;
                case "3":
                    markCompleted();
                    break;
                case "4":
                    unmarkCompleted();
                    break;
                case "5":
                    deleteTodo();
                    break;
                case "0":
                    return;
                default:
                    System.out.println("ì˜ëª»ëœ ì„ íƒì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.");
            }
        }
    }
}

class Diary {
    private Scanner scanner = new Scanner(System.in);
    private Map<String, String> diaryMap = new HashMap<>(); // ë‚ ì§œë³„ ë‹¤ì´ì–´ë¦¬ ë‚´ìš© ì €ì¥

    public void addDiary() {
    	String date = DateFormatCheck.getValidDateInput("ë‹¤ì´ì–´ë¦¬ë¥¼ ì¶”ê°€í•  ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd): ");

        System.out.println("ë‹¤ì´ì–´ë¦¬ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš” (ë‚´ìš© ì…ë ¥ í›„ $ë¡œ ì¢…ë£Œ):");
        StringBuilder content = new StringBuilder();
        while (true) {
            String line = scanner.nextLine();
            if (line.equals("$")) {
                break;
            }
            content.append(line).append("\n");
        }

        diaryMap.put(date, content.toString());

        System.out.println(date + "ì— ë‹¤ì´ì–´ë¦¬ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    public void viewDiary() {
        System.out.println("\nğŸ“Œ ë“±ë¡ëœ ë‹¤ì´ì–´ë¦¬ ëª©ë¡");
        if (diaryMap.isEmpty()) {
            System.out.println("ë“±ë¡ëœ ë‹¤ì´ì–´ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.");
        } else {
            for (String date : diaryMap.keySet()) {
                String content = diaryMap.get(date);
                System.out.printf("%s\n %s\n", date, content);
            }
        }
    }

    public void modifyDiary() {
    	String date = DateFormatCheck.getValidDateInput("ìˆ˜ì •í•  ë‹¤ì´ì–´ë¦¬ ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd): ");

        if (diaryMap.containsKey(date)) {
            System.out.println("í˜„ì¬ ë‚´ìš©: " + diaryMap.get(date));
            System.out.println("ìƒˆë¡œìš´ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš” (enter í›„ $ë¡œ ì¢…ë£Œ):");
            StringBuilder newContent = new StringBuilder();
            while (true) {
                String line = scanner.nextLine();
                if (line.equals("$")) {
                    break;
                }
                newContent.append(line).append("\n");
            }

            diaryMap.put(date, newContent.toString());

            System.out.println(date + "ì˜ ë‹¤ì´ì–´ë¦¬ í•­ëª©ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
        } else {
            System.out.println("í•´ë‹¹ ë‚ ì§œì— ë“±ë¡ëœ ë‹¤ì´ì–´ë¦¬ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.");
        }
    }

    public void deleteDiary() {
    	String date = DateFormatCheck.getValidDateInput("ì‚­ì œí•  ë‹¤ì´ì–´ë¦¬ ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd): ");

        if (diaryMap.containsKey(date)) {
            diaryMap.remove(date);
            System.out.println(date + "ì˜ ë‹¤ì´ì–´ë¦¬ í•­ëª©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
        } else {
            System.out.println("í•´ë‹¹ ë‚ ì§œì— ë“±ë¡ëœ ë‹¤ì´ì–´ë¦¬ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.");
        }
    }

    public void diaryMenu() {
        while (true) {
        	System.out.println("----------");
            System.out.println("[1] ë‹¤ì´ì–´ë¦¬ ì¶”ê°€ \n[2] ë‹¤ì´ì–´ë¦¬ ì¡°íšŒ \n[3] ë‹¤ì´ì–´ë¦¬ ìˆ˜ì • \n[4] ë‹¤ì´ì–´ë¦¬ ì‚­ì œ \n[0] ë’¤ë¡œê°€ê¸°");
            System.out.print("ì‚¬ìš©í•  ê¸°ëŠ¥ì„ ì„ íƒí•˜ì„¸ìš”: ");
            String choice = scanner.nextLine();

            switch (choice) {
                case "1":
                    addDiary();
                    break;
                case "2":
                    viewDiary();
                    break;
                case "3":
                    modifyDiary();
                    break;
                case "4":
                    deleteDiary();
                    break;
                case "0":
                    return;
                default:
                    System.out.println("ì˜ëª»ëœ ì„ íƒì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.");
            }
        }
    }
}

class SetLetter {
	private String title; // í¸ì§€ ì œëª©
    private String content; // í¸ì§€ ë‚´ìš©
    private LocalDate sendDate; // í¸ì§€ ì—´ëŒ ê°€ëŠ¥ ë‚ ì§œ

    public SetLetter(String title, String content, LocalDate sendDate) {
        this.title = title;
        this.content = content;
        this.sendDate = sendDate;
    }

    public String getTitle() { return title; }
    public String getContent() { return content; }
    public LocalDate getSendDate() { return sendDate; }
    public boolean canRead(LocalDate currentDate) {
        return !sendDate.isAfter(currentDate); // í˜„ì¬ ë‚ ì§œê°€ í¸ì§€ì˜ ì—´ëŒ ë‚ ì§œ ì´í›„ì¸ì§€ í™•ì¸
    }
}

class Letter {
    private Scanner scanner = new Scanner(System.in);
    private Map<String, SetLetter> letterContent = new HashMap<>(); // ë‚ ì§œë³„ í¸ì§€ ì €ì¥
    private Map<LocalDate, String> letterDate = new HashMap<>(); // ë‚ ì§œ ëª©ë¡
    public Map<LocalDate, String> getLetterDates() {
        return letterDate;
    }

    public Map<String, SetLetter> getLetters() { return letterContent; }

    // í¸ì§€ ì‘ì„±
    public void writeLetter() {
    	System.out.print("í¸ì§€ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”: ");
        String title = scanner.nextLine();
        
        String date = DateFormatCheck.getValidDateInput("í¸ì§€ë¥¼ ë³´ë‚¼ ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd): ");
        LocalDate sendDate = LocalDate.parse(date);

        System.out.println("í¸ì§€ ë‚´ìš©ì„ ì‘ì„±í•˜ì„¸ìš” (enter í›„ $ë¡œ ì¢…ë£Œ):");
        StringBuilder content = new StringBuilder();
        while (true) {
            String line = scanner.nextLine();
            if (line.equals("$")) {
                break;
            }
            content.append(line).append("\n");
        }

        SetLetter letter = new SetLetter(title, content.toString(), sendDate);
        letterContent.put(sendDate.toString(), letter); // í¸ì§€ ì €ì¥
        letterDate.put(sendDate, title); // ë‚ ì§œ ëª©ë¡ì— í¸ì§€ ì €ì¥
        System.out.println("í¸ì§€ê°€ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. " + sendDate + " ì´í›„ì— ì—´ëŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
    }

    // í¸ì§€ ì¡°íšŒ
    public void viewLetter() {
    	if (letterDate.isEmpty()) {
            System.out.println("ì‘ì„±ëœ í¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.");
            return;
        }
    	// ì‘ì„±ëœ í¸ì§€ë“¤ì˜ ë‚ ì§œ ëª©ë¡ ì¶œë ¥
    	System.out.println("\nğŸ“Œ ì‘ì„±ëœ í¸ì§€ ëª©ë¡");
    	letterDate.forEach((date, title) -> {
        	System.out.println(date + " - " + title);
        });
        
    	String date = DateFormatCheck.getValidDateInput("ì—´ëŒí•  í¸ì§€ì˜ ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd): ");
        SetLetter letter = letterContent.get(date);

        if (letter != null) {
            LocalDate currentDate = LocalDate.now();
            if (letter.canRead(currentDate)) {
            	System.out.println("í¸ì§€ ì œëª©: " + letter.getTitle());
                System.out.print("í¸ì§€ ë‚´ìš© \n:" + letter.getContent());
            } else {
                System.out.println("ì´ í¸ì§€ëŠ” " + letter.getSendDate() + " ì´í›„ì— ì—´ëŒ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
            }
        } else {
            System.out.println("í•´ë‹¹ ë‚ ì§œì— í¸ì§€ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
    }

    // í¸ì§€ ì‚­ì œ
    public void deleteLetter() {
    	String date = DateFormatCheck.getValidDateInput("ì‚­ì œí•  í¸ì§€ì˜ ë‚ ì§œë¥¼ ì…ë ¥í•˜ì„¸ìš”. (yyyy-MM-dd): ");

        if (letterContent.containsKey(date)) {
        	letterContent.remove(date);
            letterDate.remove(LocalDate.parse(date)); // ë‚ ì§œ ëª©ë¡ì—ì„œë„ ì‚­ì œ
            System.out.println(date + "ì˜ í¸ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
        } else {
            System.out.println("í•´ë‹¹ ë‚ ì§œì— í¸ì§€ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
    }
    
    public void checkTodayLetter() {
        Notification notification = new Notification();
        notification.checkTodayLetter(letterDate, letterContent);
    }

    public void letterMenu() {
        while (true) {
        	System.out.println("----------");
            System.out.println("[1] í¸ì§€ ì‘ì„± \n[2] í¸ì§€ ì¡°íšŒ \n[3] í¸ì§€ ì‚­ì œ \n[0] ë’¤ë¡œê°€ê¸°");
            System.out.print("ì‚¬ìš©í•  ê¸°ëŠ¥ì„ ì„ íƒí•˜ì„¸ìš”: ");
            String choice = scanner.nextLine();

            switch (choice) {
                case "1":
                    writeLetter();
                    break;
                case "2":
                    viewLetter();
                    break;
                case "3":
                    deleteLetter();
                    break;
                case "0":
                    return;
                default:
                    System.out.println("ì˜ëª»ëœ ì„ íƒì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.");
            }
        }
    }
}

class Notification {
	public void checkTodaySchedule(Map<String, List<String>> scheduleMap) {
        String today = LocalDate.now().toString();
        if (scheduleMap.containsKey(today)) {
            System.out.println("ğŸ‰ ì˜¤ëŠ˜ì˜ ì¼ì •");
            System.out.println(scheduleMap.get(today));
        } else {
            System.out.println("ì˜¤ëŠ˜ì€ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.");
        }
    }

    public void checkTodayTodo(Map<String, String> todoMap) {
        String today = LocalDate.now().toString();
        boolean found = false;
        for (String key : todoMap.keySet()) {
            if (key.startsWith(today)) {
                if (!found) {
                    System.out.println("ğŸ‰ ì˜¤ëŠ˜ì˜ To-do List");
                    found = true;
                }
                System.out.println(todoMap.get(key));
            }
        }
        if (!found) {
            System.out.println("ì˜¤ëŠ˜ì˜ To-do í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.");
        }
    }

    public void checkTodayLetter(Map<LocalDate, String> letterDates, Map<String, SetLetter> letters) {
        LocalDate today = LocalDate.now();
        boolean found = false;

        for (Map.Entry<LocalDate, String> entry : letterDates.entrySet()) {
            if (entry.getKey().isEqual(today)) {
                SetLetter letter = letters.get(entry.getKey().toString());
                if (letter != null && letter.canRead(today)) {
                    if (!found) {
                        System.out.println("ğŸ‰ ì˜¤ëŠ˜ ì—´ëŒ ê°€ëŠ¥í•œ í¸ì§€ê°€ ìˆìŠµë‹ˆë‹¤");
                        found = true;
                    }
                    System.out.println("ì œëª©: " + letter.getTitle());
                    System.out.println(letter.getContent());
                }
            }
        }

        if (!found) {
            System.out.println("ì˜¤ëŠ˜ ì—´ëŒ ê°€ëŠ¥í•œ í¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.");
        }
    }
}

public class MemoryPiece {
    public static void main(String[] args) {
        // ë¡œê·¸ì¸ ì‹œìŠ¤í…œ ì‹œì‘
        LoginSystem loginSystem = new LoginSystem();
        String id = loginSystem.systemStart();

        System.out.println(id + "ë‹˜ì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤... ");

        Schedule schedule = new Schedule();
        TodoList todoList = new TodoList();
        Diary diary = new Diary();
        Letter letter = new Letter();
        
        // ë¡œê·¸ì¸ í›„ ì¦‰ì‹œ ì•Œë¦¼ ë°›ê¸°
        System.out.println("\n=== ì˜¤ëŠ˜ì˜ ì•Œë¦¼ ===");
        Notification notification = new Notification();
        notification.checkTodaySchedule(schedule.getScheduleMap()); 
        notification.checkTodayTodo(todoList.getTodoMap()); 
        notification.checkTodayLetter(letter.getLetterDates(), letter.getLetters());
        
        // ê¸°ëŠ¥ ì„ íƒ ë©”ë‰´
        Scanner scanner = new Scanner(System.in);
        while (true) {
        	System.out.print("\n=== " + id + "ë‹˜ì˜ ê¸°ì–µ ì¡°ê° ì‹œìŠ¤í…œ ===");
            System.out.println("\n[1] ì¼ì • \n[2] To-do List \n[3] ë‹¤ì´ì–´ë¦¬ \n[4] ë¯¸ë˜ì— ë³´ë‚´ëŠ” í¸ì§€ \n[0] ì¢…ë£Œ");
            System.out.print("ì‚¬ìš©í•  ê¸°ëŠ¥ì„ ì„ íƒí•˜ì„¸ìš”: ");
            String choice = scanner.nextLine();

            switch (choice) {
                case "1":
                    // ì¼ì • ê¸°ëŠ¥ ì‹¤í–‰
                	schedule.scheduleMenu();
                    break;
                case "2":
                    // To-do List ê¸°ëŠ¥ ì‹¤í–‰
                    todoList.todoMenu();
                    break;
                case "3":
                    // ë‹¤ì´ì–´ë¦¬ ê¸°ëŠ¥ ì‹¤í–‰
                    diary.diaryMenu();
                    break;
                case "4":
                    // ë¯¸ë˜ì— ë³´ë‚´ëŠ” í¸ì§€ ê¸°ëŠ¥ ì‹¤í–‰
                    letter.letterMenu();
                    break;
                case "0":
                    System.out.println("í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.");
                    return; // ì¢…ë£Œ
                default:
                    System.out.println("ì˜ëª»ëœ ì„ íƒì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.");
            }
        }
    }
}
